worker_processes 1;

events { 
    worker_connections 1024; 
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile      on;
    tcp_nopush    on; # Optimization for static content delivery
    
    # Define a single server block
    server {
        # *** LISTENS ON YOUR CUSTOM PORT 3141 ***
        listen 3141;
        server_name  localhost; # This is internal, so localhost is fine

        # The root directory where your built Quasar files will be placed inside the container
        root   /usr/share/nginx/html;
        index  index.html;
        charset utf-8;

        # Quasar/Vue Router History Mode Configuration (CRITICAL for SPAs)
        # This ensures that when a user refreshes a sub-page (e.g., /dashboard), 
        # Nginx returns index.html instead of a 404.
        location / {
            try_files $uri $uri/ /index.html;
        }

        # Optional: Add Cache Headers for static assets (improves performance)
        # location ~* \.(css|js|jpg|jpeg|png|gif|ico)$ {
        #     expires 30d;
        #     access_log off;
        # }
    }
}